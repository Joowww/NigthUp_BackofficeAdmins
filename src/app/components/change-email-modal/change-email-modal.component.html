<div *ngIf="isOpen" class="modal-overlay">
  <div class="modal-backdrop" (click)="closeModal()"></div>
  <div class="modal-container">
    <div class="modal-header">
      <div>
        <h2 class="modal-title">Change Email</h2>
        <p class="modal-subtitle">Update your account email address</p>
      </div>
      <button (click)="closeModal()" class="close-button">
        <svg class="close-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <form (ngSubmit)="onSubmit()" class="modal-form">
      <div class="info-box">
        <div class="info-content">
          <svg class="info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <div>
            <div class="info-title">Current email</div>
            <div class="info-description">admin&#64;nightup.com</div>
          </div>
        </div>
      </div>

      <div class="form-field">
        <label for="email" class="field-label">New Email Address</label>
        <div class="input-container">
          <input
            id="email"
            type="email"
            [(ngModel)]="email"
            name="email"
            placeholder="Enter new email address"
            class="form-input"
            required
          />
          <div class="input-icon-right">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </div>
        </div>
      </div>

      <div class="form-field">
        <label for="confirmEmail" class="field-label">Confirm Email Address</label>
        <div class="input-container">
          <input
            id="confirmEmail"
            type="email"
            [(ngModel)]="confirmEmail"
            name="confirmEmail"
            placeholder="Re-enter new email address"
            class="form-input"
            required
          />
          <div class="input-icon-right">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </div>
        </div>
      </div>

      <div *ngIf="email && confirmEmail" class="email-match-indicator" [class.match]="emailsMatch" [class.mismatch]="!emailsMatch">
        <svg *ngIf="emailsMatch" class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
        <svg *ngIf="!emailsMatch" class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
        {{ emailsMatch ? 'Email addresses match' : (!isValidEmail(email) && email ? 'Invalid email format' : 'Email addresses do not match') }}
      </div>

      <div class="modal-actions">
        <button type="button" (click)="closeModal()" class="btn-secondary">Cancel</button>
        <button type="submit" class="btn-primary" [disabled]="!emailsMatch">Change Email</button>
      </div>
    </form>
  </div>
</div>